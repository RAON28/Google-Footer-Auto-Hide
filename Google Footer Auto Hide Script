// ==UserScript==
// @name         Google Footer Auto Hide
// @namespace    http://tampermonkey.net/
// @version      1.0
// @description  Automatically hide the Google footer and show it again on mouseover
// @author       RAON28
// @match        https://www.google.com/*
// @match        https://www.google.co.kr/*
// @grant        none
// ==/UserScript==

(function () {
    'use strict';

    const waitForElement = (selector, callback) => {
        const observer = new MutationObserver(() => {
            const el = document.querySelector(selector);
            if (el) {
                observer.disconnect();
                callback(el);
            }
        });
        observer.observe(document.body, { childList: true, subtree: true });
    };

    waitForElement('.c93Gbe', (footer) => {
        // 푸터 고정 + 높이 저장
        footer.style.position = 'fixed';
        footer.style.bottom = '0';
        footer.style.left = '0';
        footer.style.width = '100%';
        footer.style.zIndex = '9999';
        footer.style.transition = 'transform 0.4s ease';
        footer.style.transform = 'translateY(100%)';
        footer.style.pointerEvents = 'none';

        // 문서에 영향을 주지 않도록 body에 overflow-x hidden 적용 (혹시 모를 가로 스크롤)
        document.body.style.overflowX = 'hidden';

        // 마우스 감지용 호버 영역
        const hoverArea = document.createElement('div');
        hoverArea.style.position = 'fixed';
        hoverArea.style.bottom = '0';
        hoverArea.style.left = '0';
        hoverArea.style.width = '100%';
        hoverArea.style.height = '25px'; // 마우스로 푸터 트리거하는 영역 높이
        hoverArea.style.zIndex = '9998'; // footer보다 아래
        hoverArea.style.pointerEvents = 'auto';

        document.body.appendChild(hoverArea);

        let isVisible = false;

        hoverArea.addEventListener('mouseenter', () => {
            if (!isVisible) {
                footer.style.transform = 'translateY(0)';
                footer.style.pointerEvents = 'auto';
                isVisible = true;
            }
        });

        footer.addEventListener('mouseleave', () => {
            footer.style.transform = 'translateY(100%)';
            footer.style.pointerEvents = 'none';
            isVisible = false;
        });
    });
})();
